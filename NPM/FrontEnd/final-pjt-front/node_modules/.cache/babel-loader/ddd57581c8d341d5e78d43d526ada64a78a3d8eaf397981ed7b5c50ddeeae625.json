{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nimport createPersistedState from \"vuex-persistedstate\";\nimport router from '@/router';\nVue.use(Vuex);\nconst API_URL = 'http://127.0.0.1:8000';\nexport default new Vuex.Store({\n  plugins: [createPersistedState()],\n  state: {\n    token: null,\n    nickname: null,\n    movieList: []\n  },\n  getters: {\n    isLogin(state) {\n      return state.token ? true : false;\n    }\n  },\n  mutations: {\n    LOG_IN(state, data) {\n      state.token = data.key;\n      state.nickname = data.nickname;\n      if (router.currentRoute.name != 'home') {\n        router.push({\n          name: 'home'\n        });\n      } else {\n        router.go(router.currentRoute);\n      }\n    },\n    SEARCH_RESULT(state, data) {\n      state.movieList = data;\n      if (router.currentRoute.name != 'home') {\n        router.push({\n          name: 'home'\n        });\n      } else {\n        router.go(router.currentRoute);\n      }\n    }\n  },\n  actions: {\n    signUp(context, userData) {\n      axios({\n        method: 'POST',\n        url: `${API_URL}/accounts/signup/`,\n        data: {\n          username: userData.email,\n          name: userData.name,\n          nickname: userData.nickname,\n          email: userData.email,\n          password1: userData.password1,\n          password2: userData.password2,\n          preferMusicGenre: userData.preferMusicGenre\n        }\n      }).then(() => {\n        router.push({\n          name: 'login'\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    logIn(context, userData) {\n      console.log(userData);\n      axios({\n        method: 'POST',\n        url: `${API_URL}/accounts/login/`,\n        data: {\n          username: userData.username,\n          password: userData.password\n        }\n      }).then(response => {\n        context.commit('LOG_IN', response.data);\n      }).catch(error => {\n        alert('유저정보를 확인해주세요.');\n        console.log(error);\n      });\n    },\n    logOut() {\n      localStorage.removeItem('vuex');\n      if (router.currentRoute.name != 'home') {\n        router.push({\n          name: 'home'\n        });\n      } else {\n        router.go(router.currentRoute);\n      }\n    },\n    search(context, keyword) {\n      axios({\n        method: 'GET',\n        url: `${API_URL}/movieList`,\n        params: {\n          keyword: keyword\n        }\n      }).then(response => {\n        console.log(response.data);\n        context.commit('SEARCH_RESULT', response.data);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  },\n  modules: {}\n});","map":{"version":3,"names":["Vue","Vuex","axios","createPersistedState","router","use","API_URL","Store","plugins","state","token","nickname","movieList","getters","isLogin","mutations","LOG_IN","data","key","currentRoute","name","push","go","SEARCH_RESULT","actions","signUp","context","userData","method","url","username","email","password1","password2","preferMusicGenre","then","catch","error","console","log","logIn","password","response","commit","alert","logOut","localStorage","removeItem","search","keyword","params","modules"],"sources":["/Users/pearl/Desktop/ssafy8/NoSongGlobal/NPM/FrontEnd/final-pjt-front/src/store/index.js"],"sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios';\nimport createPersistedState from \"vuex-persistedstate\";\nimport router from '@/router'\n\nVue.use(Vuex)\n\n\nconst API_URL = 'http://127.0.0.1:8000'\n\nexport default new Vuex.Store({\n  plugins: [\n    createPersistedState()\n  ],\n  state: {\n    token: null,\n    nickname: null,\n    movieList: [],\n  },\n  getters: {\n    isLogin(state) {\n      return state.token ? true : false\n    }\n  },\n  mutations: {\n    LOG_IN(state, data){\n      state.token = data.key\n      state.nickname = data.nickname\n      if(router.currentRoute.name != 'home'){\n        router.push({ name : 'home' })\n      } else {\n        router.go(router.currentRoute)\n      }\n    }, \n    SEARCH_RESULT(state, data){\n      state.movieList = data\n      if(router.currentRoute.name != 'home'){\n        router.push({ name : 'home' })\n      } else {\n        router.go(router.currentRoute)\n      }\n    }\n  },\n  actions: {\n    signUp(context, userData) {\n      axios({\n        method: 'POST',\n        url: `${API_URL}/accounts/signup/`,\n        data: {\n          username: userData.email,\n          name: userData.name,\n          nickname: userData.nickname,\n          email: userData.email,\n          password1: userData.password1,\n          password2: userData.password2,\n          preferMusicGenre: userData.preferMusicGenre\n        }\n      }).\n      then(() => {\n        router.push({ name: 'login'})\n      }).\n      catch((error) => {\n        console.log(error)\n      })\n    },\n    logIn(context, userData) {\n      console.log(userData)\n      axios({\n        method:'POST',\n        url:`${API_URL}/accounts/login/`,\n        data: {\n          username: userData.username,\n          password: userData.password\n        }\n      })\n      .then((response) => {\n        context.commit('LOG_IN', response.data)\n      })\n      .catch((error) => {\n        alert('유저정보를 확인해주세요.')\n        console.log(error)\n      })\n      \n    },\n    logOut() {\n      localStorage.removeItem('vuex')\n      if(router.currentRoute.name != 'home'){\n        router.push({ name : 'home' })\n      } else {\n        router.go(router.currentRoute)\n      }\n    },\n\n    search(context, keyword){\n      axios({\n        method: 'GET',\n        url: `${API_URL}/movieList`,\n        params:{\n          keyword:keyword\n        }\n      })\n      .then((response) => {\n        console.log(response.data)\n        context.commit('SEARCH_RESULT', response.data)\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n    }\n  },\n  modules: {\n    \n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}